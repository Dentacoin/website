if("undefined"==typeof jQuery)console.error("Dentacoin login gateway requires the usage of jQuery.");else var gateway_croppie_instance,fireAjax=!0,loadedSocialLibs=!1,loadedAddressSuggesterLib=!1,loadedGoogleMapLib=!1,loadedCivicLib=!1,loadedFromMobileApp=!1,allowedImagesExtensions=["png","jpg","jpeg"],apiDomain="https://api.dentacoin.com",dcnLibsDomain="https://dentacoin.com",environment="live",initCivicEvents=!0,googleKey="AIzaSyCaVeHq_LOhQndssbmw-aDnlMwUG73yCdk",isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,dcnGateway={dcnGatewayRequests:{getPlatformsData:async function(e){$.ajax({type:"GET",url:"https://dentacoin.com/info/platforms",dataType:"json",success:function(t){e(t)},error:function(){console.error("Request to dentacoin.com currently not working.")}})},saveCivicEmailTryingToLoginFromMobileApp:async function(e,t){$.ajax({type:"POST",url:"https://dentacoin.com/dentacoin-login-gateway/save-civic-email",dataType:"json",data:e,success:function(e){t(e)},error:function(){console.error("Request to dentacoin.com currently not working.")}})},getGatewayHtml:async function(e,t,a){await $.ajax({type:"POST",url:e,dataType:"json",data:t,success:function(e){a(e)},error:function(){dcnGateway.utils.showPopup('Something went wrong with logging in, please try again a bit later. If the problem still appears please contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}})},getUserCountry:async function(){if(fireAjax){fireAjax=!1;var e=await $.ajax({type:"POST",url:"https://dentacoin.com/get-country-code",dataType:"json"});return fireAjax=!0,e}},checkIfFreeEmail:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:apiDomain+"/api/check-email",dataType:"json",data:e});return fireAjax=!0,t}},claimEmail:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:apiDomain+"/api/claim-email",dataType:"json",data:e});return fireAjax=!0,t}},editUserData:async function(e,t){if(fireAjax){fireAjax=!1;var a=await $.ajax({type:"POST",url:apiDomain+"/api/user/",dataType:"json",data:e,headers:{Authorization:"Bearer "+t}});return fireAjax=!0,a}},saveIncompleteRegistration:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:apiDomain+"/api/incomplete-registration/",dataType:"json",data:e});return fireAjax=!0,t}},checkDentistAccount:async function(e,t,a){if(fireAjax){fireAjax=!1;var n={email:e,password:t,platform:a};"staging"==environment&&(n.staging=!0);var i=await $.ajax({type:"POST",url:"https://dentacoin.com/check-dentist-account",dataType:"json",data:n});return fireAjax=!0,i}},checkPracticeEmail:async function(e,t){if(fireAjax){fireAjax=!1;var a="https://api.dentacoin.com/api/check-practice-email";"staging"==environment&&(a="https://dev-api.dentacoin.com/api/check-practice-email");var n=await $.ajax({type:"POST",url:a,dataType:"json",data:{email:e,clinic_email:t}});return fireAjax=!0,n}},validatePhone:async function(e,t){if(fireAjax){fireAjax=!1;var a=await $.ajax({type:"POST",url:apiDomain+"/api/phone/",dataType:"json",data:{phone:e,country_code:t}});return fireAjax=!0,a}},dentistRegistration:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:"https://dentacoin.com/dentacoin-login-gateway/handle-dentist-register",dataType:"json",data:e});return fireAjax=!0,t}},dentistLogin:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:"https://dentacoin.com/dentacoin-login-gateway/handle-dentist-login",dataType:"json",data:e});return fireAjax=!0,t}},getAfterDentistRegistrationPopup:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:"https://dentacoin.com/dentacoin-login-gateway/get-after-dentist-registration-popup",dataType:"json",data:e});return fireAjax=!0,t}},enrichProfile:async function(e){if(fireAjax){fireAjax=!1;var t=await $.ajax({type:"POST",url:"https://dentacoin.com/dentacoin-login-gateway/handle-enrich-profile",dataType:"json",data:e});return fireAjax=!0,t}},createUserSession:async function(e,t){if(fireAjax){fireAjax=!1;var a=await $.ajax({type:"POST",url:e,dataType:"json",data:t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});return fireAjax=!0,a}}},utils:{hasNumber:function(e){return/\d/.test(e)},hasLowerCase:function(e){return/[a-z]/.test(e)},hasUpperCase:function(e){return/[A-Z]/.test(e)},validatePassword:function(e){return e.trim().length>=8&&e.trim().length<=30&&dcnGateway.utils.hasLowerCase(e)&&dcnGateway.utils.hasUpperCase(e)&&dcnGateway.utils.hasNumber(e)},getGETParameters:function(){var e=window.location.search.substr(1);return null!=e&&""!=e?dcnGateway.utils.transformToAssocArray(e):{}},transformToAssocArray:function(e){for(var t={},a=e.split("&"),n=0,i=a.length;n<i;n+=1){var o=a[n].split("=");t[o[0]]=o[1]}return t},customErrorHandle:function(e,t){e.append('<div class="error-handle">'+t+"</div>")},customSuccessHandle:function(e,t){e.append('<div class="alert alert-success">'+t+"</div>")},fireGoogleAnalyticsEvent:function(e,t,a,n){if("undefined"!=typeof gtag){var i={event_category:e,event_action:t,event_label:a};null!=n&&(i.value=n),gtag("event",a,i)}},fireFacebookPixelEvent:function(e){"undefined"!=typeof fbq&&fbq("track",e)},validateUrl:function(e){return!!new RegExp("((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},showLoader:function(e){null==e&&(e="Loading ..."),$("body").append('<div class="dentacoin-login-gateway-response-layer"><div class="dentacoin-login-gateway-response-layer-wrapper"><figure itemscope="" itemtype="http://schema.org/ImageObject"><img src="https://dentacoin.com/assets/images/loader.gif" alt="Loader"></figure><div class="dentacoin-login-gateway-response-message gateway-platform-color text-center dentacoin-login-gateway-fs-30">'+e+"</div></div></div>")},hideLoader:function(){$(".dentacoin-login-gateway-response-layer").hide()},showPopup:function(e,t,a,n){if("alert"==t){var i='<button class="platform-button gateway-platform-background-color cancel-custom-popup">OK</button>';null!=n&&hasOwnProperty.call(n,"log_button")&&(i='<button class="platform-button gateway-platform-background-color cancel-custom-popup open-dentacoin-gateway patient-login">LOG IN</button>'),$("body").append('<div class="dentacoin-login-gateway-container"><div class="dentacoin-login-gateway-wrapper dcn-gateway-popup dentacoin-login-gateway-fs-18">'+e+'<div class="popup-buttons">'+i+"</div></div></div>"),$(".cancel-custom-popup").click(function(){$(this).closest(".dentacoin-login-gateway-container").remove()})}else"warning"==t?($("body").append('<div class="dentacoin-login-gateway-container"><div class="dentacoin-login-gateway-wrapper dcn-gateway-popup dentacoin-login-gateway-fs-18">'+e+'<div class="popup-buttons"><button class="platform-button proceed-custom-popup green-button">YES</button><button class="platform-button cancel-custom-popup red-button">NO</button></div></div></div>'),$(".proceed-custom-popup").click(function(){a(),$(this).closest(".dentacoin-login-gateway-container").remove()}),$(".cancel-custom-popup").click(function(){$(this).closest(".dentacoin-login-gateway-container").remove()})):"enrich-profile"==t?($("body").addClass("dentacoin-login-gateway-overflow-hidden").append('<div class="dentacoin-login-gateway-container"><div class="dentacoin-login-gateway-wrapper enrich-profile">'+e+"</div></div>"),$(".cancel-custom-popup").click(function(){$(this).closest(".dentacoin-login-gateway-container").remove()}),$("form#enrich-profile").on("submit",async function(e){e.preventDefault();var t=$(this);if(t.find(".error-handle").remove(),""==t.find("#description").val().trim())dcnGateway.utils.customErrorHandle(t.find("#description").closest(".form-row"),"This field is required.");else{var a={user:n.user,description:t.find("#description").val().trim()};"staging"==environment&&(a.staging=!0);var i,o=await dcnGateway.dcnGatewayRequests.enrichProfile(a);if(o.success)"dentist"==n.type?(i="dentistEnrichProfileSuccessResponse",dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickSave","DentDescr")):"clinic"==n.type&&(i="clinicEnrichProfileSuccessResponse",dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickSave","ClinicDescr")),$("form#enrich-profile").addClass("padding-bottom-50").html('<div class="alert alert-success">'+o.data+"</div>"),$.event.trigger({type:i,time:new Date});else o.error,dcnGateway.utils.hidePopup(),dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}})):"forbidden-civic-warning"==t&&$("body").addClass("dentacoin-login-gateway-overflow-hidden").append('<div class="dentacoin-login-gateway-container"><div class="dentacoin-login-gateway-wrapper forbidden-civic-warning">'+e+"</div></div>")},bytesToMegabytes:function(e){return e/Math.pow(1024,2)},readURL:function(e,t,a,n,i,o){if(e.files&&e.files[0]){var r=e.files[0].name;if(t<dcnGateway.utils.bytesToMegabytes(e.files[0].size))return null!=i&&i(),!1;if(-1===jQuery.inArray(r.split(".").pop().toLowerCase(),a))return null!=o&&o(),!1;if($(".gateway-avatar.module .error-handle").length&&$(".gateway-avatar.module .error-handle").remove(),null!=n){var s=new FileReader;s.onload=function(e){n(e,r)},s.readAsDataURL(e.files[0])}}},styleAvatarUploadButton:function(){if(jQuery(".upload-file.gateway-avatar").length){var e=document.querySelectorAll(".inputfile");Array.prototype.forEach.call(e,function(e){$(e).parent().find(".btn-wrapper").append('<label for="custom-upload-avatar" role="button"><div class="inner"><svg aria-hidden="true" style="width: 50px;" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-plus fa-w-14 fa-5x"><path fill="currentColor" d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" class=""></path></svg><div class="inner-label">'+$(".popup-body.translations").attr("data-translation-add-profile-photo")+"</div></div></label>"),e.addEventListener("change",function(e){var t=$(this);dcnGateway.utils.readURL(this,2,allowedImagesExtensions,function(e,t){""!=t&&null!=t&&($(".avatar-name").show().find("span").html(t.slice(0,20)+"..."),$(".upload-label-btn").addClass("less-padding")),$("#gateway-cropper-container").addClass("width-and-height"),null!=gateway_croppie_instance&&(gateway_croppie_instance.croppie("destroy"),$("#gateway-cropper-container").html(""));var a={enableOrientation:!0,enforceBoundary:!1};$(window).width()<768?(a.viewport={width:200,height:200},a.boundary={width:200,height:200}):(a.viewport={width:180,height:180},a.boundary={width:180,height:180}),gateway_croppie_instance=$("#gateway-cropper-container").croppie(a),$(".destroy-croppie").unbind().click(function(){gateway_croppie_instance.croppie("destroy"),$("#gateway-cropper-container").html(""),$("#gateway-cropper-container").removeClass("width-and-height"),$(".gateway-avatar.module .btn-wrapper").show(),$(".avatar-name").hide(),$(".dentist .form-register .step.fourth #custom-upload-avatar").val("")}),$(".gateway-avatar.module .btn-wrapper").hide(),gateway_croppie_instance.croppie("bind",{url:e.target.result,zoom:1}),$("#gateway-cropper-container").on("update.croppie",function(e,t){gateway_croppie_instance.croppie("result",{type:"canvas",size:{width:300,height:300}}).then(function(e){$(".dentacoin-login-gateway-container form#dentist-register .step.fourth #hidden-image").val(e)})})},function(){t.val(""),$(".gateway-avatar.module").append('<div class="error-handle task-error">The file you selected is large. Max size: 2MB.</div>')},function(){t.val(""),$(".gateway-avatar.module").append('<div class="error-handle task-error">Allowed file formats are only .png, .jpeg and .jpg.</div>')})}),e.addEventListener("focus",function(){e.classList.add("has-focus")}),e.addEventListener("blur",function(){e.classList.remove("has-focus")})})}},cookies:{set:function(e,t){null==e&&(e="cookieLaw"),null==t&&(t=1);var a=new Date;a.setTime(a.getTime()+864e7);var n="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+n+";domain=.dentacoin.com;path=/;secure"},erase:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},get:function(e){e+="=";for(var t=document.cookie.split(";"),a=0;a<t.length;a++){for(var n=t[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}},initCustomCheckboxes:function(){for(var e=0,t=$(".custom-checkbox-style").length;e<t;e+=1)$(".custom-checkbox-style").eq(e).hasClass("already-custom-style")||($(".custom-checkbox-style").eq(e).prepend('<label for="'+$(".custom-checkbox-style").eq(e).find('input[type="checkbox"]').attr("id")+'" class="custom-checkbox"></label>'),$(".custom-checkbox-style").eq(e).addClass("already-custom-style"));$(".custom-checkbox-style .custom-checkbox-input").unbind("change").on("change",function(){if($(this).is(":checked")?$(this).closest(".custom-checkbox-style").find(".custom-checkbox").addClass("gateway-platform-background-color-important").html("✓"):$(this).closest(".custom-checkbox-style").find(".custom-checkbox").removeClass("gateway-platform-background-color-important").html(""),null!=$(this).attr("data-radio-group"))for(var e=0,t=$('[data-radio-group="'+$(this).attr("data-radio-group")+'"]').length;e<t;e+=1)$(this).is($('[data-radio-group="'+$(this).attr("data-radio-group")+'"]').eq(e))||($('[data-radio-group="'+$(this).attr("data-radio-group")+'"]').eq(e).prop("checked",!1),$('[data-radio-group="'+$(this).attr("data-radio-group")+'"]').eq(e).closest(".custom-checkbox-style").find(".custom-checkbox").removeClass("gateway-platform-background-color-important").html(""))})},initCivicListeners:function(e,t){console.log("initCivicListeners"),$(document).on("successfulCivicPatientLogin",async function(e){dcnGateway.utils.fireGoogleAnalyticsEvent("PatientLogin","ClickCivic","PatientLoginCivic"),dcnGateway.utils.fireFacebookPixelEvent("PatientLogin")}),$(document).on("registeredAccountMissingEmail",async function(e){dcnGateway.utils.hideLoader(),$(".login-section-title").html($(".popup-body.translations").attr("data-translation-update-email")),$(".dentacoin-login-gateway-container .patient .form-login .form-login-fields").hide(),$(".dentacoin-login-gateway-container .patient .form-login").append('<div class="registered-user-without-email-parent"><div class="padding-bottom-10 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="registered-patient-without-email">'+$(".popup-body.translations").attr("data-translation-email-field")+'</label><input class="full-rounded form-field" maxlength="100" type="email" id="registered-patient-without-email" /></div><div class="dentacoin-login-gateway-fs-14 light-gray-color padding-top-5">'+$(".popup-body.translations").attr("data-translation-please-add-email")+'</div></div><div class="patient-register-checkboxes padding-top-5"><div class="custom-checkbox-style"><input type="checkbox" class="custom-checkbox-input" id="privacy-policy-registered-user-without-email"/><label class="dentacoin-login-gateway-fs-15 custom-checkbox-label" for="privacy-policy-registered-user-without-email">'+$(".popup-body.translations").attr("data-translation-i-agree")+'<a href="https://dentacoin.com/privacy-policy" class="data-external-link" target="_blank">'+$(".popup-body.translations").attr("data-translation-privacy-policy")+'</a></label></div></div><div class="text-right padding-top-15"><a href="javascript:void(0);" class="platform-button opposite gateway-platform-color-important dentacoin-login-gateway-fs-20 save-registered-patient-without-email inline-block">'+$(".popup-body.translations").attr("data-translation-continue")+"</a></div></div>"),dcnGateway.utils.initCustomCheckboxes(),$(".dentacoin-login-gateway-container .patient .form-login .save-registered-patient-without-email").click(async function(){if($(".registered-user-without-email-parent .error-handle").remove(),""!=$(".dentacoin-login-gateway-container .patient .form-login #registered-patient-without-email").val().trim()&&dcnGateway.utils.validateEmail($(".dentacoin-login-gateway-container .patient .form-login #registered-patient-without-email").val().trim()))if($(".dentacoin-login-gateway-container .patient .form-login #privacy-policy-registered-user-without-email").is(":checked")){var t={email:$(".dentacoin-login-gateway-container .patient .form-login #registered-patient-without-email").val().trim()},a=await dcnGateway.dcnGatewayRequests.editUserData(t,e.response_data.token);if(dcnGateway.utils.hideLoader(),a.success)$.event.trigger({type:"patientProceedWithCreatingSession",response_data:e.response_data,platform_type:e.platform_type,time:new Date}),dcnGateway.utils.hideGateway(!0);else if(a.errors){var n="";for(var i in a.errors)n+=a.errors[i]+"<br>";dcnGateway.utils.showPopup(n,"alert")}else dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}else dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .patient .form-login #privacy-policy-registered-user-without-email").closest(".patient-register-checkboxes"),"Please agree with our Privacy Policy.");else dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .patient .form-login #registered-patient-without-email").closest(".field-parent"),"Please use valid email address.")})}),$(document).on("civicRead",async function(e){dcnGateway.utils.hideGateway(),dcnGateway.utils.showLoader("Receiving your details from Civic...")}),$(document).on("CivicLegacyAppForbiddenLogging",async function(e){var t=e;console.log(t,"eventData"),dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('<div class="warning-icon"><?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY ns_extend "http://ns.adobe.com/Extensibility/1.0/"><!ENTITY ns_ai "http://ns.adobe.com/AdobeIllustrator/10.0/"><!ENTITY ns_graphs "http://ns.adobe.com/Graphs/1.0/"><!ENTITY ns_vars "http://ns.adobe.com/Variables/1.0/"><!ENTITY ns_imrep "http://ns.adobe.com/ImageReplacement/1.0/"><!ENTITY ns_sfw "http://ns.adobe.com/SaveForWeb/1.0/"><!ENTITY ns_custom "http://ns.adobe.com/GenericCustomNamespace/1.0/"><!ENTITY ns_adobe_xpath "http://ns.adobe.com/XPath/1.0/"><svg version="1.1" id="Layer_1" xmlns:x="&ns_extend;" xmlns:i="&ns_ai;" xmlns:graph="&ns_graphs;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 82" style="enable-background:new 0 0 64 82;" xml:space="preserve"><metadata><sfw xmlns="&ns_sfw;"><slices></slices><sliceSourceBounds bottomLeftOrigin="true" height="82.1" width="63.9" x="0.1" y="-0.1"></sliceSourceBounds></sfw></metadata><g transform="translate(0,-952.36218)"><g><path style="fill:#3AB03E;" d="M31.8,952.4c-0.1,0-0.3,0.1-0.4,0.1l-30,11c-0.8,0.3-1.3,1-1.3,1.9v33c0,7.8,4.4,14.3,10.3,20c5.9,5.7,13.5,10.7,20.5,15.7c0.7,0.5,1.6,0.5,2.3,0c7-5,14.6-10,20.5-15.7c5.9-5.7,10.3-12.2,10.3-20v-33c0-0.8-0.5-1.6-1.3-1.9l-30-11C32.5,952.4,32.1,952.3,31.8,952.4z M32.1,956.5l28,10.3v31.6c0,6.3-3.5,11.8-9.1,17.1c-5.2,5-12.2,9.7-18.9,14.4c-6.7-4.7-13.7-9.4-18.9-14.4c-5.5-5.3-9.1-10.8-9.1-17.1v-31.6L32.1,956.5z"/></g></g><text transform="matrix(1 0 0 1 22.2637 60.0695)" style="fill:#3AB03E;font-size:58.497px;">!</text></svg></div><div class="popup-text">CIVIC Identity app will be deprecated soon and integrated in the new upgraded CIVIC Wallet application. To avoid interruptions of your login experience, switch to the new CIVIC Wallet app now. Get it on <a href="https://play.google.com/store/apps/details?id=com.civic.wallet&referrer=utm_source%3Dhomepage%26utm_medium%3Dwebsite&_branch_match_id=827481124251595050&utm_source=homepage&utm_campaign=android&utm_medium=download" class="gateway-platform-color-important data-external-link" target="_blank">GooglePlay</a> or <a href="https://l.civic.com/1RP0bpRMg7" class="gateway-platform-color-important data-external-link" target="_blank">AppStore</a>.<br><br>Make sure you create your account in CIVIC Wallet with the <b>same email address</b> you are currently using to get access to your account.</div><div class="text-center padding-bottom-15"><a href="javascript:void(0);" class="continue-with-civic-wallet-app platform-button gateway-platform-background-color-important dentacoin-login-gateway-fs-20">CONTINUE WITH CIVIC WALLET APP</a></div><div class="text-center dentacoin-login-gateway-fs-18">Not yet. <a href="javascript:void(0);" class="continue-with-legacy-app gateway-platform-color-important">Login with CIVIC Identity app.</a></div>',"forbidden-civic-warning"),$(".continue-with-legacy-app").click(function(){console.log("continue with legacy app"),$.event.trigger({type:"patientProceedWithCreatingSession",platform_type:"civic",time:new Date,response_data:t.response_data})}),$(".continue-with-civic-wallet-app").click(async function(){console.log("continue with civic wallet app"),dcnGateway.utils.hideGateway(),$.event.trigger({type:"openPatientLogin",openLogin:!0,time:new Date})})}),$(document).on("CivicLegacyAppForbiddenRegistrations",async function(e){dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('<div class="warning-icon"><?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY ns_extend "http://ns.adobe.com/Extensibility/1.0/"><!ENTITY ns_ai "http://ns.adobe.com/AdobeIllustrator/10.0/"><!ENTITY ns_graphs "http://ns.adobe.com/Graphs/1.0/"><!ENTITY ns_vars "http://ns.adobe.com/Variables/1.0/"><!ENTITY ns_imrep "http://ns.adobe.com/ImageReplacement/1.0/"><!ENTITY ns_sfw "http://ns.adobe.com/SaveForWeb/1.0/"><!ENTITY ns_custom "http://ns.adobe.com/GenericCustomNamespace/1.0/"><!ENTITY ns_adobe_xpath "http://ns.adobe.com/XPath/1.0/"><svg version="1.1" id="Layer_1" xmlns:x="&ns_extend;" xmlns:i="&ns_ai;" xmlns:graph="&ns_graphs;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 82" style="enable-background:new 0 0 64 82;" xml:space="preserve"><metadata><sfw xmlns="&ns_sfw;"><slices></slices><sliceSourceBounds bottomLeftOrigin="true" height="82.1" width="63.9" x="0.1" y="-0.1"></sliceSourceBounds></sfw></metadata><g transform="translate(0,-952.36218)"><g><path style="fill:#3AB03E;" d="M31.8,952.4c-0.1,0-0.3,0.1-0.4,0.1l-30,11c-0.8,0.3-1.3,1-1.3,1.9v33c0,7.8,4.4,14.3,10.3,20c5.9,5.7,13.5,10.7,20.5,15.7c0.7,0.5,1.6,0.5,2.3,0c7-5,14.6-10,20.5-15.7c5.9-5.7,10.3-12.2,10.3-20v-33c0-0.8-0.5-1.6-1.3-1.9l-30-11C32.5,952.4,32.1,952.3,31.8,952.4z M32.1,956.5l28,10.3v31.6c0,6.3-3.5,11.8-9.1,17.1c-5.2,5-12.2,9.7-18.9,14.4c-6.7-4.7-13.7-9.4-18.9-14.4c-5.5-5.3-9.1-10.8-9.1-17.1v-31.6L32.1,956.5z"/></g></g><text transform="matrix(1 0 0 1 22.2637 60.0695)" style="fill:#3AB03E;font-size:58.497px;">!</text></svg></div><div class="popup-text">CIVIC Identity app has been replaced by the new upgraded CIVIC Wallet app. Get it on <a href="https://play.google.com/store/apps/details?id=com.civic.wallet&referrer=utm_source%3Dhomepage%26utm_medium%3Dwebsite&_branch_match_id=827481124251595050&utm_source=homepage&utm_campaign=android&utm_medium=download" class="gateway-platform-color-important data-external-link" target="_blank">GooglePlay</a> or <a href="https://l.civic.com/1RP0bpRMg7" class="gateway-platform-color-important data-external-link" target="_blank">AppStore</a>.</div><div class="text-center padding-bottom-15"><a href="javascript:void(0);" class="continue-with-civic-wallet-app platform-button gateway-platform-background-color-important dentacoin-login-gateway-fs-20">CONTINUE WITH CIVIC WALLET APP</a></div>',"forbidden-civic-warning"),$(".continue-with-civic-wallet-app").click(function(){console.log("continue with civic wallet app"),dcnGateway.utils.hideGateway(),$.event.trigger({type:"openPatientRegister",time:new Date})})}),$(document).on("successfulCivicPatientRegistration",async function(e){dcnGateway.utils.fireGoogleAnalyticsEvent("PatientRegistration","ClickCivic"," PatientRegistrationCivic"),dcnGateway.utils.fireFacebookPixelEvent("PatientRegistration")}),$(document).on("noCoreDBApiConnection",function(e){dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}),$(document).on("patientAuthErrorResponse",function(e){var t="";if(e.response_data.errors)for(var a in e.response_data.errors)t+=e.response_data.errors[a]+"<br>";var n={};e.response_data.log_button&&(n.log_button=!0),dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup(t,"alert",null,n)}),$(document).on("patientProceedWithCreatingSession",async function(a){var n=e+"authenticate-user";(await dcnGateway.dcnGatewayRequests.createUserSession(n,{token:a.response_data.token,id:a.response_data.data.id,type:"patient"})).success?$.event.trigger({type:"patientAuthSuccessResponse",response_data:a.response_data,platform_type:t.platform,time:new Date}):(dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('Something went wrong with the external login provider, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert"))})},hideGateway:function(e){$(".dentacoin-login-gateway-container").remove(),$("body").removeClass("dentacoin-login-gateway-overflow-hidden"),null!=e&&1==e&&($(document).off("civicCustomBtnClicked"),$(document).off("civicRead"),$(document).off("hideGateway"),$(document).off("hideGatewayLoader"),$(document).off("CivicLegacyAppForbiddenLogging"),$(document).off("CivicLegacyAppForbiddenRegistrations"),$(document).off("receivedFacebookToken"),$(document).off("facebookCustomBtnClicked"),$(document).off("cannotLoginBecauseOfMissingCookies"),$(document).off("noUserIdReceived"),$(document).off("noCoreDBApiConnection"),$(document).off("customCivicFbStopperTriggered"),$(document).off("registeredAccountMissingEmail"),$(document).off("patientProceedWithCreatingSession"),$(document).off("successfulFacebookPatientRegistration"),$(document).off("successfulFacebookPatientLogin"),$(document).off("successfulCivicPatientRegistration"),$(document).off("successfulCivicPatientLogin"),$(document).off("patientAuthErrorResponse"),$(document).off("dentistProceedWithCreatingSession"),$(document).off("noExternalLoginProviderConnection"),$(document).off("civicSipError"),$(document).off("getAfterDentistRegistrationPopupForDentist"),$(document).off("getAfterDentistRegistrationPopupForClinic"),initCivicEvents=!0)},hidePopup:function(){$(".dentacoin-login-gateway-container").remove(),$("body").removeClass("dentacoin-login-gateway-overflow-hidden")},getMobileOperatingSystem:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":/(Mac|iPhone|iPod|iPad)/.test(e)&&!window.MSStream?"Mac":"unknown"},androidFileUpload:function(e){fileChooser.open(function(t){function a(e){alert("Something went wrong with uploading your file. Please contact admin@dentacoin.com.")}window.FilePath.resolveNativePath(t,function(t){window.resolveLocalFileSystemURL(t,function(t){console.log(t,"entry1"),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory,function(n){console.log(n,"rootEntry1"),n.getFile(decodeURIComponent(t.fullPath),{create:!1},function(t){console.log(t,"fileEntry1"),t.file(function(t){e(t)},function(e){a()})},function(n){window.resolveLocalFileSystemURL("file:///",function(n){console.log(n,"rootEntry2"),n.getFile(decodeURIComponent(t.fullPath),{create:!1},function(t){console.log(t,"fileEntry2"),t.file(function(t){console.log(t,"file2"),e(t)},function(e){a()})})})})})})},a)})},iOSFileUpload:function(e){FilePicker.pickFile(function(t){var a=cordova.file.tempDirectory.replace("file://",""),n=t.replace(a,"");window.resolveLocalFileSystemURL(cordova.file.tempDirectory,function(t){console.log(t,"rootEntry"),t.getFile(n,{create:!1},function(t){t.file(function(t){e(t)})},function(e){alert("Something went wrong with reading your cached file (Core error 2). Please contact admin@dentacoin.com.")})})},function(e){alert("File importing failed. Please update to one of the latest iOS versions in order to have file importing working.")})}},init:async function(e){var t,a=dcnGateway.utils.cookies.get("first_test");if(""!=a&&(t=JSON.parse(decodeURIComponent(a)).location),"object"!=typeof e&&null===e||!hasOwnProperty.call(e,"platform")||!hasOwnProperty.call(e,"forgotten_password_link"))console.error("False params passed to dentacoin login gateway.");else{if(!navigator.onLine)return console.error("Dentacoin login gateway requires internet connection."),!1;hasOwnProperty.call(e,"environment")&&"staging"==e.environment&&(apiDomain="https://dev-api.dentacoin.com",dcnLibsDomain="https://dev.dentacoin.com",environment="staging"),hasOwnProperty.call(e,"mobile_app")&&1==e.mobile_app&&(loadedFromMobileApp=!0,googleKey="AIzaSyAq7ie77jwp2ydsmjM0yvo69f0yyrx-9QA"),await dcnGateway.dcnGatewayRequests.getPlatformsData(async function(a){var n,i,o=!1;if("urgent.dentavox"==e.platform||"urgent.reviews"==e.platform){"urgent.dentavox"==e.platform?(i="https://urgent.dentavox.dentacoin.com/",e.platform="dentavox"):"urgent.reviews"==e.platform&&(i="https://urgent.reviews.dentacoin.com/",e.platform="trusted-reviews");for(var r=0,s=a.length;r<s;r+=1)if("dentavox"==a[r].slug){n=a[r].color;break}o=!0}else if("dev.dentacoin"==e.platform){i="https://dev.dentacoin.com/",e.platform="dentacoin";for(r=0,s=a.length;r<s;r+=1)if("dentavox"==a[r].slug){n=a[r].color;break}o=!0}else for(r=0,s=a.length;r<s;r+=1)if(a[r].slug==e.platform){o=!0,n=a[r].color,i=a[r].link;break}var c='<style class="platform-colors">.gateway-platform-fill{fill:'+n+";}.gateway-platform-color{color:"+n+";}.gateway-platform-color-important{color:"+n+" !important;}.gateway-platform-background-color{background-color:"+n+"}.gateway-platform-background-color-important{background-color:"+n+" !important;}.gateway-platform-border-color{border-color:"+n+";}.gateway-platform-border-color-important{border-color:"+n+" !important;}.tooltip-label:after {border-top-color:"+n+" !important;}</style>";if($("head").append(c),!o)return console.error("False 'platform' parameter passed to dentacoin login gateway."),!1;$("#dentacoin-login-gateway-style").length||(isFirefox||loadedFromMobileApp?$("head").append('<link rel="stylesheet" id="dentacoin-login-gateway-style" type="text/css" href="'+dcnLibsDomain+"/assets/libs/dentacoin-login-gateway/css/dentacoin-login-gateway-style.css?v="+(new Date).getTime()+'"/>'):$("head").append('<link rel="preload" as="style" onload="this.rel=\'stylesheet\'" id="dentacoin-login-gateway-style" type="text/css" href="'+dcnLibsDomain+"/assets/libs/dentacoin-login-gateway/css/dentacoin-login-gateway-style.css?v="+(new Date).getTime()+'"/>'));var l=dcnGateway.utils.getGETParameters();async function d(a,n,o){var r={type:a};null!=n&&(r.data=n),"staging"==environment&&(r.staging=!0),l.hasOwnProperty("inviter")&&(r.inviter=l.inviter),l.hasOwnProperty("inviteid")&&(r.inviteid=l.inviteid),hasOwnProperty.call(e,"mobile_app")&&1==e.mobile_app&&(r.mobile_app=!0);var s="https://dentacoin.com/dentacoin-login-gateway";"staging"==environment&&(s="https://dev.dentacoin.com/dentacoin-login-gateway"),await dcnGateway.dcnGatewayRequests.getGatewayHtml(s,r,async function(a){if(a.success){if(loadedSocialLibs||(console.log("Load external libraries."),loadedCivicLib||loadedFromMobileApp||(loadedCivicLib=!0,await $.getScript("https://dentacoin.com/assets/libs/civic-login/civic-combined-login.js?v="+(new Date).getTime(),function(){})),await $.getScript(dcnLibsDomain+"/assets/libs/facebook-login/facebook-combined-login.js?v="+(new Date).getTime(),function(){}),loadedSocialLibs=!0),dcnGateway.utils.hideGateway(!0),$("body").addClass("dentacoin-login-gateway-overflow-hidden").append('<div class="dentacoin-login-gateway-container"><div class="dentacoin-login-gateway-wrapper">'+a.data+"</div></div>"),$(".patient .social-login-btn").attr("data-platform",e.platform),$(".dentacoin-login-gateway-container .forgotten-password-link").attr("href",e.forgotten_password_link),"assurance"!=e.platform&&"trusted-reviews"!=e.platform||$('.popup-header-action a[data-type="patient"]').html($(".popup-header-action").attr("data-translation-patients")),dcnGateway.utils.initCustomCheckboxes(),$("body").on("click",".custom-gateway-google-label-style label",function(){$(this).addClass("active-label gateway-platform-color-important"),"true"==$(".custom-gateway-google-label-style").attr("data-input-colorful-border")&&$(this).parent().find("input").addClass("gateway-platform-border-color-important")}),$(".dentacoin-login-gateway-container form#dentist-login, .dentacoin-login-gateway-container form#dentist-register").bind("keypress",function(e){if(13==e.keyCode)return $(".dentacoin-login-gateway-container .dentist .form-register .next-step").click(),!1}),loadedFromMobileApp){function n(t){dcnGateway.dcnGatewayRequests.saveCivicEmailTryingToLoginFromMobileApp({email:window.localStorage.getItem("user_civic_email"),type:e.platform},function(e){console.log(e,"response"),e.success?($(".patient .mobile-proceeding-to-civic").remove(),$(".patient .form-register-fields, .patient .form-login-fields").show(),t.hasClass("type-login")?window.open("https://dentavox.dentacoin.com/?dcn-gateway-type=patient-login&open-civic-login=true","_blank"):t.hasClass("type-register")&&window.open("https://dentavox.dentacoin.com/?dcn-gateway-type=patient-register&open-civic-register=true","_blank")):dcnGateway.utils.showPopup('Something went wrong with the external login provider, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")})}$(".civic-custom-btn").click(function(){var e=$(this);if(e.hasClass("type-register")&&($(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder .error-handle").length&&$(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder .error-handle").remove(),!$("#agree-over-eighteen").is(":checked")||!$("#privacy-policy-registration-patient").is(":checked")))return dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder"),"Please confirm you're 18 years of age and agree with our Privacy Policy."),!1;if(null==window.localStorage.getItem("user_civic_email")){e.hasClass("type-login")?($(".form-login-fields").hide(),$(".patient .form-login").append('<div class="padding-bottom-50 mobile-proceeding-to-civic"><div class="padding-bottom-10 field-parent dentacoin-login-gateway-fs-16" style="color: white;">Open your Civic Wallet mobile app and paste your account email:</div><div class="padding-bottom-10 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="mobile-logging-civic-email">Civic Wallet email</label><input class="full-rounded form-field" maxlength="100" type="email" id="mobile-logging-civic-email" /></div></div><div class="padding-bottom-20"><a href="javascript:void(0)" class="social-login-btn civic-style calibri-regular dentacoin-login-gateway-fs-20 dentacoin-login-gateway-fs-xs-18">Continue with Civic</a></div><div><a href="javascript:void(0);" class="go-back-to-logins dentacoin-login-gateway-fs-16" style="color: white;">← Go back</a></div></div>')):e.hasClass("type-register")&&($(".form-register-fields").hide(),$(".patient .form-register").append('<div class="padding-bottom-50 mobile-proceeding-to-civic"><div class="padding-bottom-10 field-parent dentacoin-login-gateway-fs-16" style="color: white;">Open your Civic Wallet mobile app and paste your account email:</div><div class="padding-bottom-10 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="mobile-logging-civic-email">Civic Wallet email</label><input class="full-rounded form-field" maxlength="100" type="email" id="mobile-logging-civic-email" /></div></div><div class="padding-bottom-20"><a href="javascript:void(0)" class="social-login-btn civic-style calibri-regular dentacoin-login-gateway-fs-20 dentacoin-login-gateway-fs-xs-18">Continue with Civic</a></div><div><a href="javascript:void(0);" class="go-back-to-logins dentacoin-login-gateway-fs-16" style="color: white;">← Go back</a></div></div>'));var t=!1;$(".mobile-proceeding-to-civic .social-login-btn").click(function(){$(".patient .mobile-proceeding-to-civic .error-handle").length&&$(".patient .mobile-proceeding-to-civic .error-handle").remove(),""!=$(".patient #mobile-logging-civic-email").val().trim()&&dcnGateway.utils.validateEmail($(".patient #mobile-logging-civic-email").val().trim())?t||(t=!0,window.localStorage.setItem("user_civic_email",$(".patient #mobile-logging-civic-email").val().trim()),n(e)):dcnGateway.utils.customErrorHandle($(".patient #mobile-logging-civic-email").closest(".field-parent"),"Please enter valid email.")}),$(".patient .go-back-to-logins").click(function(){$(".patient .mobile-proceeding-to-civic").remove(),$(".patient .form-register-fields, .patient .form-login-fields").show()})}else n(e)})}$("body").on("keyup change focusout",".custom-gateway-google-label-style input",function(){$(this).val().trim().length?($(this).closest(".custom-gateway-google-label-style").find("label").addClass("active-label gateway-platform-color-important"),"true"==$(this).closest(".custom-gateway-google-label-style").attr("data-input-colorful-border")&&$(this).addClass("gateway-platform-border-color-important")):($(this).closest(".custom-gateway-google-label-style").find("label").removeClass("active-label gateway-platform-color-important"),"true"==$(this).closest(".custom-gateway-google-label-style").attr("data-input-colorful-border")&&$(this).removeClass("gateway-platform-border-color-important"))}),$(".dentacoin-login-gateway-container .popup-header-action a").click(function(){$(".dentacoin-login-gateway-container .popup-header-action a").removeClass("active gateway-platform-background-color-important"),"patient"==$(this).attr("data-type")?$(this).addClass("active gateway-platform-background-color-important"):$(this).addClass("active"),$(".dentacoin-login-gateway-container .popup-body > .inline-block").addClass("custom-hide"),$(".dentacoin-login-gateway-container .popup-body ."+$(this).attr("data-type")).removeClass("custom-hide")}),$(".dentacoin-login-gateway-container .call-sign-up").click(function(){$(".dentacoin-login-gateway-container .form-login").addClass("display-none"),$(".dentacoin-login-gateway-container .form-register").removeClass("display-none")}),$(".dentacoin-login-gateway-container .call-log-in").click(function(){$(".dentacoin-login-gateway-container .form-login").removeClass("display-none"),$(".dentacoin-login-gateway-container .form-register").addClass("display-none")}),$(".dentacoin-login-gateway-container .patient .form-register #privacy-policy-registration-patient").on("change",function(){$(this).is(":checked")&&$(".dentacoin-login-gateway-container .patient .form-register #agree-over-eighteen").is(":checked")?($(".dentacoin-login-gateway-container .patient .form-register .facebook-custom-btn").removeAttr("custom-stopper"),$(".dentacoin-login-gateway-container .patient .form-register .civic-custom-btn").removeAttr("custom-stopper")):($(".dentacoin-login-gateway-container .patient .form-register .facebook-custom-btn").attr("custom-stopper","true"),$(".dentacoin-login-gateway-container .patient .form-register .civic-custom-btn").attr("custom-stopper","true"))}),$(".dentacoin-login-gateway-container .patient .form-register #agree-over-eighteen").on("change",function(){$(this).is(":checked")&&$(".dentacoin-login-gateway-container .patient .form-register #privacy-policy-registration-patient").is(":checked")?($(".dentacoin-login-gateway-container .patient .form-register .facebook-custom-btn").removeAttr("custom-stopper"),$(".dentacoin-login-gateway-container .patient .form-register .civic-custom-btn").removeAttr("custom-stopper")):($(".dentacoin-login-gateway-container .patient .form-register .facebook-custom-btn").attr("custom-stopper","true"),$(".dentacoin-login-gateway-container .patient .form-register .civic-custom-btn").attr("custom-stopper","true"))}),initCivicEvents&&(initCivicEvents=!1,dcnGateway.utils.initCivicListeners(i,e)),$(document).on("civicCustomBtnClicked",function(e){$(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder").html("")}),$(document).on("receivedFacebookToken",async function(e){dcnGateway.utils.hideGateway(),dcnGateway.utils.showLoader("Receiving your details from Facebook...")}),$(document).on("facebookCustomBtnClicked",function(e){$(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder").html("")}),$(document).on("cannotLoginBecauseOfMissingCookies",function(e){dcnGateway.utils.showPopup("Please accept the strictly necessary cookies in order to continue with logging in.","alert")}),$(document).on("noUserIdReceived",function(e){dcnGateway.utils.showPopup(e.message,"alert")}),$(document).on("customCivicFbStopperTriggered",function(e){dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .patient .form-register .step-errors-holder"),"Please confirm you're 18 years of age and agree with our Privacy Policy.")}),$(document).on("successfulFacebookPatientLogin",async function(e){dcnGateway.utils.fireGoogleAnalyticsEvent("PatientLogin","ClickFB","PatientLoginFB"),dcnGateway.utils.fireFacebookPixelEvent("PatientLogin")}),$(document).on("successfulFacebookPatientRegistration",async function(e){dcnGateway.utils.fireGoogleAnalyticsEvent("PatientRegistration","ClickFB","PatientRegistrationFB"),dcnGateway.utils.fireFacebookPixelEvent("PatientRegistration")}),$(document).on("hideGateway",async function(e){dcnGateway.utils.hideGateway(!0)}),$(document).on("hideGatewayLoader",async function(e){dcnGateway.utils.hideLoader()}),$(document).on("dentistProceedWithCreatingSession",async function(t){if(loadedFromMobileApp)$.event.trigger({type:"dentistAuthSuccessResponse",response_data:t.response_data,platform_type:e.platform,time:new Date}),dcnGateway.utils.hideLoader();else{var a=i+"authenticate-user";(await dcnGateway.dcnGatewayRequests.createUserSession(a,{token:t.response_data.token,id:t.response_data.data.id,type:"dentist"})).success?$.event.trigger({type:"dentistAuthSuccessResponse",response_data:t.response_data,platform_type:e.platform,time:new Date}):(dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('Something went wrong with the external login provider, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert"))}}),$(document).on("dentistRegisterSuccessResponse",async function(t){"trusted-reviews"==e.platform?$.event.trigger({type:"dentistRegisterSuccessResponseTrustedReviews",response_data:t.response_data,platform_type:e.platform,time:new Date}):t.response_data.data.is_clinic?$.event.trigger({type:"getAfterDentistRegistrationPopupForClinic",time:new Date,response_data:{user:t.response_data.data.id}}):$.event.trigger({type:"getAfterDentistRegistrationPopupForDentist",time:new Date,response_data:{user:t.response_data.data.id}})}),$(document).on("getAfterDentistRegistrationPopupForDentist",async function(e){var t=await dcnGateway.dcnGatewayRequests.getAfterDentistRegistrationPopup({"user-type":"dentist"});t.success&&dcnGateway.utils.showPopup(t.data,"enrich-profile",null,{user:e.response_data.user,type:"dentist"})}),$(document).on("getAfterDentistRegistrationPopupForClinic",async function(e){var t=await dcnGateway.dcnGatewayRequests.getAfterDentistRegistrationPopup({"user-type":"clinic"});t.success&&dcnGateway.utils.showPopup(t.data,"enrich-profile",null,{user:e.response_data.user,type:"clinic"})}),$(document).on("noExternalLoginProviderConnection",function(e){dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('Something went wrong with the external login provider, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}),$(document).on("civicSipError",function(e){dcnGateway.utils.hideLoader(),dcnGateway.utils.showPopup('Something went wrong with the external login provider, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}),$(".dentacoin-login-gateway-container form#dentist-login").on("submit",async function(t){$(".dentist-login-errors").html("");var a=$(this);if(t.preventDefault(),"1"==dcnGateway.utils.cookies.get("strictly_necessary_policy")||loadedFromMobileApp){$(".dentacoin-login-gateway-container form#dentist-login .error-handle").length&&$(".dentacoin-login-gateway-container form#dentist-login .error-handle").remove();for(var n=a.find(".form-field"),i=!0,o=0,r=n.length;o<r;o+=1)"email"!=n.eq(o).attr("type")||dcnGateway.utils.validateEmail(n.eq(o).val().trim())||(dcnGateway.utils.customErrorHandle(n.eq(o).closest(".field-parent"),"Please use valid email address."),i=!1),""==n.eq(o).val().trim()&&(dcnGateway.utils.customErrorHandle(n.eq(o).closest(".field-parent"),"This field is required."),i=!1);if(i){var s=await dcnGateway.dcnGatewayRequests.checkDentistAccount($('.dentacoin-login-gateway-container form#dentist-login input[name="email"]').val().trim(),$('.dentacoin-login-gateway-container form#dentist-login input[name="password"]').val().trim(),e.platform);if(s.success&&null!=s.redirect_to)return window.location.replace(s.redirect_to),!1}if(i&&s.success){dcnGateway.utils.fireGoogleAnalyticsEvent("DentistLogin","Click","DentistLogin"),dcnGateway.utils.fireFacebookPixelEvent("DentistLogin");var c={platform:e.platform,email:$('.dentacoin-login-gateway-container form#dentist-login input[name="email"]').val().trim(),password:$('.dentacoin-login-gateway-container form#dentist-login input[name="password"]').val().trim()};"staging"==environment&&(c.staging=!0);var l=await dcnGateway.dcnGatewayRequests.dentistLogin(c);if(l.success)dcnGateway.utils.validatePassword($('.dentacoin-login-gateway-container form#dentist-login input[name="password"]').val().trim())?($.event.trigger({type:"dentistProceedWithCreatingSession",response_data:l.data,platform_type:e.platform,time:new Date}),dcnGateway.utils.hideGateway(!0)):($(".dentist .form-login").html("<h2>"+$(".popup-body.translations").attr("data-translation-update-password")+'</h2><form method="POST" id="dentist-update-password"><div class="padding-bottom-10 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="dentist-update-password-field">'+$(".popup-body.translations").attr("data-translation-password-field")+'</label><input class="full-rounded form-field required password" minlength="8" maxlength="30" type="password" id="dentist-update-password-field"/></div></div><div class="padding-bottom-20 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="dentist-update-repeat-password-field">'+$(".popup-body.translations").attr("data-translation-repeat-password-field")+'</label><input class="full-rounded form-field required repeat-password" minlength="8" maxlength="30" type="password" id="dentist-update-repeat-password-field"/></div></div><div class="dentist-update-password-errors"></div><div class="btn-container text-center padding-top-20 padding-bottom-50"><input type="submit" value="'+$(".popup-body.translations").attr("data-translation-save")+'" class="platform-button gateway-platform-background-color-important dentacoin-login-gateway-fs-20"/></div></form>'),$(".dentist .form-login #dentist-update-password").on("submit",async function(t){$(this);var a=!1;t.preventDefault(),$(".dentist .form-login #dentist-update-password .error-handle").remove();for(var n=$(".dentist .form-login #dentist-update-password .form-field.required"),i=0,o=n.length;i<o;i+=1)""==n.eq(i).val().trim()&&(dcnGateway.utils.customErrorHandle(n.eq(i).closest(".field-parent"),"This field is required."),a=!0);var r=$(".dentist .form-login #dentist-update-password #dentist-update-password-field").val().trim();if(r!=$(".dentist .form-login #dentist-update-password #dentist-update-repeat-password-field").val().trim()&&(dcnGateway.utils.customErrorHandle($(".dentist .form-login #dentist-update-password .dentist-update-password-errors"),"Both passwords don't match."),a=!0),dcnGateway.utils.validatePassword(r)||(dcnGateway.utils.customErrorHandle($(".dentist .form-login #dentist-update-password .dentist-update-password-errors"),"Password must contain between 8 and 30 symbols with at least one uppercase letter, one lowercase letter and a number or a special character."),a=!0),!a){var s={password:r,"password-repeat":$(".dentist .form-login #dentist-update-password #dentist-update-repeat-password-field").val().trim()},c=await dcnGateway.dcnGatewayRequests.editUserData(s,l.data.token);if(c.success)$.event.trigger({type:"dentistProceedWithCreatingSession",response_data:l.data,platform_type:e.platform,time:new Date}),dcnGateway.utils.hideGateway(!0);else if(c.errors){var d="";for(var p in c.errors)d+=c.errors[p]+"<br>";dcnGateway.utils.showPopup(d,"alert")}else dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}}));else if(l.error)if("object"==typeof l.message&&null!==l.message){var d="";for(var p in l.message)d+=l.message[p]+"<br>";$(".dentist-login-errors").html('<div class="error-handle">'+d+"</div>")}else $(".dentist-login-errors").html('<div class="error-handle">'+l.message+"</div>");else dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}else i&&s.error&&dcnGateway.utils.customErrorHandle(a.find('input[name="password"]').closest(".field-parent"),s.message)}else dcnGateway.utils.showPopup("Please accept the strictly necessary cookies in order to continue with logging in.","alert")}),$(".dentacoin-login-gateway-container .dentist .form-register .prev-step").click(function(){var e=$(".dentacoin-login-gateway-container .dentist .form-register .step.visible"),t=e.prev();e.removeClass("visible"),t.hasClass("first")&&$(this).hide(),t.addClass("visible"),$(".dentacoin-login-gateway-container .dentist .form-register .next-step").val("Next"),$(".dentacoin-login-gateway-container .dentist .form-register .next-step").attr("data-current-step",t.attr("data-step"))}),$(".changeable-color-on-selected-value").on("change",function(){""==$(this).val()?$(this).addClass("dcn-gateway-gray-color"):$(this).removeClass("dcn-gateway-gray-color")});for(var o=0,r=$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").length;o<r;o+=1)"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()?$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(o).html($(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(o).attr("data-dentist")):$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(o).html($(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(o).attr("data-clinic"));for(o=0,r=$(".dentacoin-login-gateway-container .changeable-html-based-on-resolution").length;o<r;o+=1)$(window).width()<1200?$(".dentacoin-login-gateway-container .changeable-html-based-on-resolution").eq(o).html($(".dentacoin-login-gateway-container .changeable-html-based-on-resolution").eq(o).attr("data-mobile")):$(".dentacoin-login-gateway-container .changeable-html-based-on-resolution").eq(o).html($(".dentacoin-login-gateway-container .changeable-html-based-on-resolution").eq(o).attr("data-desktop"));if($(".dentacoin-login-gateway-container .step.second .user-type-container .user-type").click(function(){$(".dentacoin-login-gateway-container .step.second .show-on-user-type-first-change").show(),$(".dentacoin-login-gateway-container .step.second .user-type-container .error-handle").hide(),$(".dentacoin-login-gateway-container .step.second .user-type-container .user-type").removeClass("active"),$(".dentacoin-login-gateway-container .step.second .user-type-container .custom-button").removeClass("gateway-platform-border-color-important"),$(".dentacoin-login-gateway-container .step.second .user-type-container .custom-button .circle").removeClass("gateway-platform-background-color-important"),$(".dentacoin-login-gateway-container .step.second .user-type-container .user-type-label").removeClass("gateway-platform-color"),$(this).addClass("active"),$(this).find(".custom-button .circle").addClass("gateway-platform-background-color-important"),$(this).find(".custom-button").addClass("gateway-platform-border-color-important"),$(this).find(".user-type-label").addClass("gateway-platform-color"),$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val($(this).attr("data-type"));for(var e=0,t=$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").length;e<t;e+=1)"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()?$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(e).html($(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(e).attr("data-dentist")):$(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(e).html($(".dentacoin-login-gateway-container .changeable-html-based-on-user-type").eq(e).attr("data-clinic"));"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()?($(".show-if-dentist").show(),$(".show-if-clinic").hide(),$(".show-if-clinic .to-be-required").removeClass("required"),null==$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]:checked').val()&&$(".show-if-dentist-type-selected").hide()):($(".show-if-dentist").hide(),$(".show-if-clinic").show(),$(".show-if-dentist-type-selected").show(),$(".show-if-clinic .to-be-required").addClass("required"))}),$('.dentacoin-login-gateway-container .step.second select[name="clinic-member-job-title"]').on("change",function(){"other"==$(this).val()?($(this).closest(".field-parent").append('<div class="custom-gateway-google-label-style module clinic-member-job-title-other-parent" data-input-colorful-border="true"><label for="clinic-member-job-title-other">'+$(".popup-body.translations").attr("data-translation-please-specify-field")+'</label><input class="full-rounded form-field required" name="clinic-member-job-title-other" maxlength="50" type="text" id="clinic-member-job-title-other"/></div>'),$(".dentacoin-login-gateway-container .step.second .clinic-member-job-title-other-parent #clinic-member-job-title-other").focus(),$('.dentacoin-login-gateway-container .step.second .clinic-member-job-title-other-parent label[for="clinic-member-job-title-other"]').addClass("active-label")):$(this).closest(".field-parent").find(".clinic-member-job-title-other-parent").remove()}),$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]').on("change",function(){$(".dentacoin-login-gateway-container .step.second .show-if-dentist-type-selected").show(),"work_at_practice"==$(this).val()?$(".dentacoin-login-gateway-container .step.second .if-work-for-a-practice").html('<div class="padding-bottom-15 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="practice-name">'+$(".popup-body.translations").attr("data-translation-practise-name-field")+'</label><input class="full-rounded form-field" name="practice-name" maxlength="255" type="text" id="practice-name"/></div></div><div class="padding-bottom-15 field-parent"><div class="custom-gateway-google-label-style module" data-input-colorful-border="true"><label for="practice-email">'+$(".popup-body.translations").attr("data-translation-official-email-field")+'</label><input class="full-rounded form-field" name="practice-email" maxlength="100" type="text" id="practice-email"/></div></div>'):$(".dentacoin-login-gateway-container .step.second .if-work-for-a-practice").html("")}),$(".dentacoin-login-gateway-container #dentist-country").on("change",function(){$(".dentacoin-login-gateway-container .step.third .phone .country-code").html("+"+$(this).find("option:selected").attr("data-code"))}),loadedFromMobileApp){function s(e){if(2<dcnGateway.utils.bytesToMegabytes(e.size))return $(".gateway-avatar.module").append('<div class="error-handle task-error">The file you selected is large. Max size: 2MB.</div>'),!1;var t=!1;if(null!=e.type)for(var a=0,n=allowedImagesExtensions.length;a<n;a+=1)if(e.type.includes(allowedImagesExtensions[a])){t=!0;break}if(t){var i=new FileReader;i.onloadend=function(){var t=e.name;console.log(this.result,"this.result"),console.log(e.localURL,"file.localURL"),""!=t&&null!=t&&($(".avatar-name").show().find("span").html(t.slice(0,20)+"..."),$(".upload-label-btn").addClass("less-padding")),console.log(t,"filename"),$("#gateway-cropper-container").addClass("width-and-height"),null!=gateway_croppie_instance&&(gateway_croppie_instance.croppie("destroy"),$("#gateway-cropper-container").html(""));gateway_croppie_instance=$("#gateway-cropper-container").croppie({enforceBoundary:!1,viewport:{width:200,height:200},boundary:{width:200,height:200}}),$(".destroy-croppie").unbind().click(function(){gateway_croppie_instance.croppie("destroy"),$("#gateway-cropper-container").html(""),$("#gateway-cropper-container").removeClass("width-and-height"),$(".gateway-avatar.module .btn-wrapper").show(),$(".avatar-name").hide(),$(".dentist .form-register .step.fourth #custom-upload-avatar").val(""),$(".dentacoin-login-gateway-container form#dentist-register .step.fourth #hidden-image").val("")}),$(".gateway-avatar.module .btn-wrapper").hide(),gateway_croppie_instance.croppie("bind",{url:e.localURL,zoom:1}),$("#gateway-cropper-container").on("update.croppie",function(e,t){gateway_croppie_instance.croppie("result",{type:"base64",size:{width:300,height:300}}).then(function(e){console.log(e,"src"),$(".dentacoin-login-gateway-container form#dentist-register .step.fourth #hidden-image").val(e)})})},i.readAsDataURL(e)}else $(".gateway-avatar.module").append('<div class="error-handle task-error">Allowed file formats are only .png, .jpeg and .jpg.</div>')}$(".step.fourth .btn-wrapper").append('<label class="custom-upload-avatar" role="button"><div class="inner"><svg aria-hidden="true" style="width: 50px;" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-plus fa-w-14 fa-5x"><path fill="currentColor" d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" class=""></path></svg><div class="inner-label">'+$(".popup-body.translations").attr("data-translation-add-profile-photo")+"</div></div></label>"),$(".step.fourth .custom-upload-avatar").click(function(){$(".dentacoin-login-gateway-container .dentist .form-register .step.fourth").find(".error-handle").remove(),"Android"==dcnGateway.utils.getMobileOperatingSystem()?dcnGateway.utils.androidFileUpload(function(e){console.log(e,"file"),s(e)}):"iOS"==dcnGateway.utils.getMobileOperatingSystem()&&dcnGateway.utils.iOSFileUpload(function(e){console.log(e,"file"),s(e)})})}else dcnGateway.utils.styleAvatarUploadButton();function c(){var t={platform:e.platform,email:$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-email").val().trim(),password:$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-password").val().trim(),name:$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-latin-name").val().trim(),type:$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()};return""!=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-alternative-name").val().trim()&&(t.name_alternative=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-alternative-name").val().trim()),"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()?(t.title=$('.dentacoin-login-gateway-container form#dentist-register select[name="dentist-title"]').val().trim(),t.dentist_practice=$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]:checked').val(),"work_at_practice"==t.dentist_practice&&(t.clinic_name=$(".dentacoin-login-gateway-container .step.second #practice-name").val().trim(),t.clinic_email=$(".dentacoin-login-gateway-container .step.second #practice-email").val().trim())):"clinic"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()&&(t.worker_name=$(".dentacoin-login-gateway-container .step.second #clinic-member-name").val().trim(),t.working_position=$('.dentacoin-login-gateway-container .step.second [name="clinic-member-job-title"]').val(),"other"==t.working_position&&(t.working_position_label=$(".dentacoin-login-gateway-container .step.second #clinic-member-job-title-other").val().trim())),t}var l;async function d(){null!=t?($('.step.third #dentist-country option[data-id="'+t+'"]').prop("selected",!0),$(".step.third .country-code").html("+"+$('.step.third #dentist-country option[data-id="'+t+'"]').attr("data-code"))):((l=await dcnGateway.dcnGatewayRequests.getUserCountry()).success&&($(".step.third #dentist-country").attr("data-current-user-country-code",l.success),$('.step.third #dentist-country option[value="'+l.success+'"]').prop("selected",!0)),$(".step.third .country-code").html("+"+$('.step.third #dentist-country option[value="'+l.success+'"]').attr("data-code"))),(!loadedGoogleMapLib&&"object"!=typeof google||"object"==typeof google&&"object"!=typeof google.maps)&&(await $.getScript("https://maps.googleapis.com/maps/api/js?key="+googleKey+"&libraries=places&language=en",function(){}),loadedGoogleMapLib=!1),loadedAddressSuggesterLib||(await $.getScript("https://dentacoin.com/assets/libs/dentacoin-login-gateway/js/address-combined-login.js?v="+(new Date).getTime(),function(){}),"function"==typeof initAddressSuggesters&&initAddressSuggesters(),loadedAddressSuggesterLib=!1)}if("true"==$(".next-step").attr("data-cached-step"))switch($(".next-step").attr("data-current-step")){case"third":d();break;case"fourth":!async function(){(!loadedGoogleMapLib&&"object"!=typeof google||"object"==typeof google&&"object"!=typeof google.maps)&&(await $.getScript("https://maps.googleapis.com/maps/api/js?key="+googleKey+"&libraries=places&language=en",function(){}),loadedGoogleMapLib=!1),loadedAddressSuggesterLib||(await $.getScript("https://dentacoin.com/assets/libs/dentacoin-login-gateway/js/address-combined-login.js?v="+(new Date).getTime(),function(){}),"function"==typeof initAddressSuggesters&&initAddressSuggesters(),loadedAddressSuggesterLib=!1),loadedFromMobileApp||await $.getScript("https://www.google.com/recaptcha/api.js",function(){}),isFirefox||loadedFromMobileApp?$("head").append('<link rel="stylesheet" type="text/css" href="https://dentacoin.com/assets/libs/croppie/croppie.css"/>'):$("head").append('<link rel="preload" as="style" onload="this.rel=\'stylesheet\'" type="text/css" href="https://dentacoin.com/assets/libs/croppie/croppie.css"/>'),await $.getScript("https://dentacoin.com/assets/libs/croppie/croppie.min.js",function(){})}()}return $(document).on("click",".step.first .register-claim",async function(){$("#dentist-register-email").closest(".field-parent").find(".error-handle").remove(),$("#dentist-register-email").closest(".field-parent").find(".alert-success").remove(),$(this).unbind();var e=await dcnGateway.dcnGatewayRequests.claimEmail({email:$("#dentist-register-email").val().trim()});e.success?dcnGateway.utils.customSuccessHandle($("#dentist-register-email").closest(".field-parent"),e.message):dcnGateway.utils.customErrorHandle($("#dentist-register-email").closest(".field-parent"),'Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.')}),$(".dentacoin-login-gateway-container .dentist .form-register .next-step").click(async function(){var t=$(this);switch(t.attr("data-current-step")){case"first":var a=$(".dentacoin-login-gateway-container .dentist .form-register .step.first .form-field"),n=!1;$(".dentacoin-login-gateway-container .dentist .form-register .step.first").parent().find(".error-handle").remove(),$("#dentist-register-email").closest(".field-parent").find(".alert-success").remove();for(var i=0,o=a.length;i<o;i+=1){if("email"!=a.eq(i).attr("type")||dcnGateway.utils.validateEmail(a.eq(i).val().trim())){if("email"==a.eq(i).attr("type")&&dcnGateway.utils.validateEmail(a.eq(i).val().trim())){var r=await dcnGateway.dcnGatewayRequests.checkIfFreeEmail({email:a.eq(i).val().trim(),for_register:!0});0==r.success&&(dcnGateway.utils.customErrorHandle(a.eq(i).closest(".field-parent"),r.errors.email),n=!0)}}else dcnGateway.utils.customErrorHandle(a.eq(i).closest(".field-parent"),"Please use valid email address."),n=!0;""==a.eq(i).val().trim()&&(dcnGateway.utils.customErrorHandle(a.eq(i).closest(".field-parent"),"This field is required."),n=!0)}var s=$(".dentacoin-login-gateway-container .dentist .form-register .step.first .form-field.password").val().trim();dcnGateway.utils.validatePassword(s)||(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.first .form-field.repeat-password").closest(".field-parent"),"Password must contain between 8 and 30 symbols with at least one uppercase letter, one lowercase letter and a number or a special character."),n=!0),s!=$(".dentacoin-login-gateway-container .step.first .form-field.repeat-password").val().trim()&&(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.first .form-field.repeat-password").closest(".field-parent"),"Both passwords don't match."),n=!0),n||(dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickNext","DentistRegistrationStep1"),dcnGateway.utils.fireFacebookPixelEvent("DentistRegistrationStep1"),$(".dentacoin-login-gateway-container .dentist .form-register .step").removeClass("visible"),$(".dentacoin-login-gateway-container .dentist .form-register .step.second").addClass("visible"),$(".dentacoin-login-gateway-container .prev-step").show(),t.attr("data-current-step","second"),t.val("Next"));break;case"second":var l=$(".dentacoin-login-gateway-container .dentist .form-register .step.second .form-field.required");n=!1;$(".dentacoin-login-gateway-container .dentist .form-register .step.second").find(".error-handle").remove();for(i=0,o=l.length;i<o;i+=1)l.eq(i).is("select")?""==l.eq(i).val().trim()&&(dcnGateway.utils.customErrorHandle(l.eq(i).closest(".field-parent"),"This field is required."),n=!0):l.eq(i).is("input")&&(""==l.eq(i).val().trim()?(dcnGateway.utils.customErrorHandle(l.eq(i).closest(".field-parent"),"This field is required."),n=!0):"email"!=l.eq(i).attr("type")||dcnGateway.utils.validateEmail(l.eq(i).val().trim())||(dcnGateway.utils.customErrorHandle(l.eq(i).closest(".field-parent"),"Please use valid email address."),n=!0));if(/^[0-9a-z A-Z.&‘'-]+$/.test($('.dentacoin-login-gateway-container .dentist .form-register .step.second input[name="latin-name"]').val().trim())||(dcnGateway.utils.customErrorHandle($('.dentacoin-login-gateway-container .dentist .form-register .step.second input[name="latin-name"]').closest(".field-parent"),"This field should contain only latin characters."),n=!0),$(".dentacoin-login-gateway-container .dentist .form-register .step.second #privacy-policy-registration").is(":checked")||(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .dentist .form-register .step.second .privacy-policy-row"),'Please agree with our <a href="https://dentacoin.com/privacy-policy" target="_blank" class="data-external-link">Privacy Policy</a>.'),n=!0),""==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()&&(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second .user-type-container"),"Please select which type you're - Dentist or Clinic."),n=!0),"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()&&(null==$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]:checked').val()&&(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second .dentist-type-checkboxes"),"Please select one of the options."),n=!0),"work_at_practice"==$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]:checked').val()))if(""==$(".dentacoin-login-gateway-container .step.second #practice-name").val().trim()?(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second #practice-name").closest(".field-parent"),"This field is required."),n=!0):/^[0-9a-z A-Z.&‘'-]+$/.test($(".dentacoin-login-gateway-container .step.second #practice-name").val().trim())||(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second #practice-name").closest(".field-parent"),"This field should contain only latin characters."),n=!0),""==$(".dentacoin-login-gateway-container .step.second #practice-email").val().trim())dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second #practice-email").closest(".field-parent"),"This field is required."),n=!0;else if(dcnGateway.utils.validateEmail($(".dentacoin-login-gateway-container .step.second #practice-email").val().trim())){var p=await dcnGateway.dcnGatewayRequests.checkPracticeEmail($(".dentacoin-login-gateway-container form#dentist-register #dentist-register-email").val().trim(),$(".dentacoin-login-gateway-container .step.second #practice-email").val().trim());p.success?($(".step.third .prepend-notice-popup .alert-notice").remove(),p.message&&$(".step.third .prepend-notice-popup").prepend('<div class="alert alert-notice show">'+p.message+"</div>")):p.success||(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second #practice-email").closest(".field-parent"),p.errors.clinic_email),n=!0)}else dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.second #practice-email").closest(".field-parent"),"Please use valid email address."),n=!0;"clinic"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()&&(/^[a-z A-Z.&‘'-]+$/.test($('.dentacoin-login-gateway-container .dentist .form-register .step.second input[name="clinic-member-name"]').val().trim())||(dcnGateway.utils.customErrorHandle($('.dentacoin-login-gateway-container .dentist .form-register .step.second input[name="clinic-member-name"]').closest(".field-parent"),"This field should contain only latin characters."),n=!0),""==$('.dentacoin-login-gateway-container .step.second [name="clinic-member-job-title"]').val()&&(dcnGateway.utils.customErrorHandle($('.dentacoin-login-gateway-container .step.second [name="clinic-member-job-title"]').closest(".field-parent"),"Please select job title."),n=!0)),n||(dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickNext","DentistRegistrationStep2"),dcnGateway.utils.fireFacebookPixelEvent("DentistRegistrationStep2"),await dcnGateway.dcnGatewayRequests.saveIncompleteRegistration(c()),$(".dentacoin-login-gateway-container .dentist .form-register .step").removeClass("visible"),$(".dentacoin-login-gateway-container .dentist .form-register .step.third").addClass("visible"),await d(),t.attr("data-current-step","third"),t.val("Next"));break;case"third":var g=$(".dentacoin-login-gateway-container .dentist .form-register .step.third .form-field.required");n=!1;$(".dentacoin-login-gateway-container .dentist .form-register .step.third").find(".error-handle").remove();for(i=0,o=g.length;i<o;i+=1)g.eq(i).is("select")?""==g.eq(i).val().trim()&&(dcnGateway.utils.customErrorHandle(g.eq(i).closest(".field-parent"),"This field is required."),n=!0):g.eq(i).is("input")&&(""==g.eq(i).val().trim()&&(dcnGateway.utils.customErrorHandle(g.eq(i).closest(".field-parent"),"This field is required."),n=!0),"url"!=g.eq(i).attr("type")||dcnGateway.utils.validateUrl(g.eq(i).val().trim())||(dcnGateway.utils.customErrorHandle(g.eq(i).closest(".field-parent"),"Please enter your website URL starting with http:// or https://."),n=!0));var u=$('.dentacoin-login-gateway-container .dentist .form-register .step.third select[name="country-code"]').val(),m=$('.dentacoin-login-gateway-container .dentist .form-register .step.third input[name="phone"]').val().trim();if("xk"!=u){var y=await dcnGateway.dcnGatewayRequests.validatePhone(m,u);hasOwnProperty.call(y,"success")&&!y.success&&(dcnGateway.utils.customErrorHandle($('.dentacoin-login-gateway-container .dentist .form-register .step.third input[name="phone"]').closest(".field-parent"),"Please use valid phone."),n=!0)}else(!/^[0-9 -]+$/.test(m)||m.length>12)&&(dcnGateway.utils.customErrorHandle($('.dentacoin-login-gateway-container .dentist .form-register .step.third input[name="phone"]').closest(".field-parent"),"Please use valid phone."),n=!0);if(1==stopThirdRegistrationStep&&(n=!0),!n){if(null!=$("#dentist-country").attr("data-current-user-country-code")&&$("#dentist-country").val()!=$("#dentist-country").attr("data-current-user-country-code"))dcnGateway.utils.showPopup("Your IP thinks differently. Sure you've entered the right country?","warning",async function(){dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickNext","DentistRegistrationStep3"),dcnGateway.utils.fireFacebookPixelEvent("DentistRegistrationStep3");var a=c();a.platform=e.platform,a.email=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-email").val().trim(),a.country_id=$('.dentacoin-login-gateway-container .step.third [name="country-code"] option:selected').attr("data-id"),a.address=$(".dentacoin-login-gateway-container .step.third #dentist-register-address").val().trim(),a.website=$(".dentacoin-login-gateway-container .step.third #dentist-register-website").val().trim(),a.phone=$(".dentacoin-login-gateway-container .step.third #dentist-register-phone").val().trim(),await dcnGateway.dcnGatewayRequests.saveIncompleteRegistration(a),$(".dentacoin-login-gateway-container .dentist .form-register .step").removeClass("visible"),$(".dentacoin-login-gateway-container .dentist .form-register .step.fourth").addClass("visible"),t.attr("data-current-step","fourth"),t.val("Create account")});else{dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickNext","DentistRegistrationStep3"),dcnGateway.utils.fireFacebookPixelEvent("DentistRegistrationStep3");var f=c();f.platform=e.platform,f.email=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-email").val().trim(),f.country_id=$('.dentacoin-login-gateway-container .step.third [name="country-code"] option:selected').attr("data-id"),f.address=$(".dentacoin-login-gateway-container .step.third #dentist-register-address").val().trim(),f.website=$(".dentacoin-login-gateway-container .step.third #dentist-register-website").val().trim(),f.phone=$(".dentacoin-login-gateway-container .step.third #dentist-register-phone").val().trim(),await dcnGateway.dcnGatewayRequests.saveIncompleteRegistration(f),$(".dentacoin-login-gateway-container .dentist .form-register .step").removeClass("visible"),$(".dentacoin-login-gateway-container .dentist .form-register .step.fourth").addClass("visible"),t.attr("data-current-step","fourth"),t.val("Create account")}loadedFromMobileApp||await $.getScript("https://www.google.com/recaptcha/api.js",function(){}),isFirefox||loadedFromMobileApp?$("head").append('<link rel="stylesheet" type="text/css" href="https://dentacoin.com/assets/libs/croppie/croppie.css"/>'):$("head").append('<link rel="preload" as="style" onload="this.rel=\'stylesheet\'" type="text/css" href="https://dentacoin.com/assets/libs/croppie/croppie.css"/>'),await $.getScript("https://dentacoin.com/assets/libs/croppie/croppie.min.js",function(){})}break;case"fourth":$(".dentacoin-login-gateway-container .dentist .form-register .step.fourth").find(".error-handle").remove();n=!1;async function w(){$(".dentacoin-login-gateway-container form#dentist-register .step.fourth .step-errors-holder").html(""),dcnGateway.utils.fireGoogleAnalyticsEvent("DentistRegistration","ClickNext","DentistRegistrationComplete"),dcnGateway.utils.fireFacebookPixelEvent("DentistRegistrationComplete");var t={platform:e.platform,email:$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-email").val().trim(),password:$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-password").val().trim(),"repeat-password":$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-repeat-password").val().trim(),"latin-name":$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-latin-name").val().trim(),"user-type":$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val(),"country-code":$('.dentacoin-login-gateway-container .step.third [name="country-code"]').val(),address:$(".dentacoin-login-gateway-container .step.third #dentist-register-address").val().trim(),website:$(".dentacoin-login-gateway-container .step.third #dentist-register-website").val().trim(),phone:$(".dentacoin-login-gateway-container .step.third #dentist-register-phone").val().trim(),specializations:$('.dentacoin-login-gateway-container form#dentist-register input[name="password"]').val().trim(),"hidden-image":$(".dentacoin-login-gateway-container form#dentist-register .step.fourth #hidden-image").val().trim()};loadedFromMobileApp?t.typeRegistration="mobile":t.grecaptcha=grecaptcha.getResponse();for(var a=[],n=0,i=$('.dentacoin-login-gateway-container form#dentist-register .step.fourth [name="specializations[]"]:checked').length;n<i;n+=1)a.push($('.dentacoin-login-gateway-container form#dentist-register .step.fourth [name="specializations[]"]:checked').eq(n).val());t.specializations=JSON.stringify(a),""!=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-alternative-name").val().trim()&&(t["alternative-name"]=$(".dentacoin-login-gateway-container form#dentist-register #dentist-register-alternative-name").val().trim()),"dentist"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()?(t["dentist-title"]=$('.dentacoin-login-gateway-container form#dentist-register select[name="dentist-title"]').val().trim(),t.dentist_practice=$('.dentacoin-login-gateway-container .step.second [name="dentist-type"]:checked').val(),"work_at_practice"==t.dentist_practice&&(t.clinic_name=$(".dentacoin-login-gateway-container .step.second #practice-name").val().trim(),t.clinic_email=$(".dentacoin-login-gateway-container .step.second #practice-email").val().trim())):"clinic"==$('.dentacoin-login-gateway-container .step.second .user-type-container [name="user-type"]').val()&&(t.worker_name=$(".dentacoin-login-gateway-container .step.second #clinic-member-name").val().trim(),t.working_position=$('.dentacoin-login-gateway-container .step.second [name="clinic-member-job-title"]').val(),"other"==t.working_position&&(t.working_position_label=$(".dentacoin-login-gateway-container .step.second #clinic-member-job-title-other").val().trim())),"staging"==environment&&(t.staging=!0);var o=await dcnGateway.dcnGatewayRequests.dentistRegistration(t);if(o.success)$.event.trigger({type:"dentistRegisterSuccessResponse",response_data:o.data,platform_type:e.platform,time:new Date}),dcnGateway.utils.hideGateway(!0);else if(o.error)if("object"==typeof o.message&&null!==o.message){var r="";for(var s in o.message)r+=o.message[s]+"<br>";$(".dentacoin-login-gateway-container form#dentist-register .step.fourth .step-errors-holder").html('<div class="error-handle">'+r+"</div>")}else $(".dentacoin-login-gateway-container form#dentist-register .step.fourth .step-errors-holder").html('<div class="error-handle">'+o.message+"</div>");else dcnGateway.utils.showPopup('Something went wrong, please try again later or contact <a href="mailto:admin@dentacoin.com">admin@dentacoin.com</a>.',"alert")}loadedFromMobileApp?""==$(".dentacoin-login-gateway-container form#dentist-register .step.fourth #hidden-image").val()&&(dcnGateway.utils.customErrorHandle($(".step.fourth .step-errors-holder"),"Please add a profile photo."),n=!0):""==$(".dentist .form-register .step.fourth #custom-upload-avatar").val().trim()&&(dcnGateway.utils.customErrorHandle($(".step.fourth .step-errors-holder"),"Please add a profile photo."),n=!0),null==$('.dentacoin-login-gateway-container .dentist .form-register .step.fourth [name="specializations[]"]:checked').val()&&(dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.fourth .step-errors-holder"),"Please select specialization/s."),n=!0),n||(loadedFromMobileApp?w():null!=typeof grecaptcha&&0==grecaptcha.getResponse().length?dcnGateway.utils.customErrorHandle($(".dentacoin-login-gateway-container .step.fourth .step-errors-holder"),"Please prove that you're not a robot."):w())}}),$.event.trigger({type:"dentacoinLoginGatewayLoaded",time:new Date}),!1}return console.error("Something failed, please contact developer."),!1}),"function"==typeof o&&o(),"function"==typeof e.callback&&e.callback()}l.hasOwnProperty("uuid")&&!loadedCivicLib&&(console.log("init civic lib for mobile civic"),loadedCivicLib=!0,await $.getScript(dcnLibsDomain+"/assets/libs/civic-login/civic-combined-login.js?v="+(new Date).getTime(),function(){})),initCivicEvents&&(initCivicEvents=!1,dcnGateway.utils.initCivicListeners(i,e)),$(document).on("click",".dentacoin-login-gateway-container",function(e){"dentacoin-login-gateway-container"==e.target.className&&dcnGateway.utils.hideGateway(!0)}),$(document).on("click",".dentacoin-login-gateway-close",function(e){dcnGateway.utils.hideGateway(!0)}),$(document).on("click",".open-dentacoin-gateway",function(){$(this).hasClass("patient-login")?d("patient-login"):$(this).hasClass("patient-register")?d("patient-register"):$(this).hasClass("dentist-login")?d("dentist-login"):$(this).hasClass("dentist-register")?d("dentist-register"):d("patient-login")}),$(document).on("openPatientLogin",function(e){d("patient-login",void 0,function(){$(".civic-custom-btn.type-login").click()})}),$(document).on("openPatientRegister",function(e){d("patient-register")}),$(document).on("openDentistLogin",function(e){d("dentist-login")}),$(document).on("openDentistRegister",function(e){d("dentist-register")}),hasOwnProperty.call(l,"dcn-gateway-type")?-1==["patient-login","patient-register","dentist-login","dentist-register"].indexOf(l["dcn-gateway-type"])?console.error("Wrong dcn-gateway-type get parameter value in the url."):("patient-login"==l["dcn-gateway-type"]?hasOwnProperty.call(l,"open-civic-login")&&($(document).off("civicLibLoaded"),$(document).on("civicLibLoaded",function(){$(".civic-custom-btn.type-login").click()})):"patient-register"==l["dcn-gateway-type"]&&hasOwnProperty.call(l,"open-civic-register")&&($(document).off("civicLibLoaded"),$(document).on("civicLibLoaded",function(){$("#agree-over-eighteen").prop("checked",!0).trigger("change"),$("#privacy-policy-registration-patient").prop("checked",!0).trigger("change"),$(".civic-custom-btn.type-register").click()})),d(l["dcn-gateway-type"])):hasOwnProperty.call(l,"inviter")||hasOwnProperty.call(l,"show-patient-register")?d("patient-register"):hasOwnProperty.call(l,"show-login")?d("patient-login"):hasOwnProperty.call(l,"temp-data-key")&&hasOwnProperty.call(l,"temp-data-id")&&d("incompleted-dentist-register",{key:l["temp-data-key"],id:l["temp-data-id"]})})}}};
